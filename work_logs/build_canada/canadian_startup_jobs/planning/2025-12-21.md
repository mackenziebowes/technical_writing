# Jobs Task

## Problem Statement

Currently, there are no agents prepared to extract the structured data of JobBoards and Jobs.

A recently surfaced extended problem (from an initial vibe code sketch) to knock out here is the null-case: What happens when a company isn't hiring? Agents need to not only be able to collect specific structured job data to match our tags, _but also_ access an early return idea IFF there are, in fact, no jobs on a page.

## Complexities

A lot of job code is prewritten, but currently the pipeline between data types and data access (CRUD functions, tool calling) is brittle - changing the data type at the Database level doesn't auto-update across the coded surface.

This problem is somewhat of a siren song - "automagically create crud routes and agentic tools from ORM schemas" is a YC Startup idea, not a patch. We accept, for Canadian Startup Jobs, the inefficiency of avoiding this work over the short term to prioritize shipping a working, if brittle, project.

This is because the **main problem statement** across all current code additions is: the product doesn't exist yet.

Just... let it be known that I *am* considering the frailty of this system, and leaving notes for hardening.

This isn't YAGNI, we will need it, this is YNAB - we can't afford to dilly dally.

## Current Assets

**./apps/server/src/functions/pivots/jobs.ts** - Currently provides reusable, prewritten aliases for all `pivot table` CRUD operations - in essence, tag *connections*, for giving the Tagging Agent access to tools that tag jobs according to the unstructured Job Post fetch result.

**./apps/server/src/functions/tags/** - Currently provides reusable, prewritten aliases for all `tag` table CRUD operations, for giving the Tagging Agent access to tools that list and create relevent tags based on the data they see inside the unstructured Job Post fetch result.

**./apps/server/src/lib/ai/observability.ts** - Currently provides reusable agentic observation for debugging agents.

**./apps/server/src/lib/errors/index.ts** - Currently provides reusable error handling for debugging processes.

**./apps/server/src/functions/jobs/jobs.ts** - Currently exports a schema and function for adding Jobs to the DB, a necessary step before tagging jobs.

## Missing Assets

- **Job Board Reading Agent** - We need an agent that reads the career pages / job boards and uses the logic from the sibling cron package to add discovered pages to a queue.
- **Job Post Reading Agent** - We need an agent that reads each individual job post and returns data about it according to some prompt goal.
- **Job Post Storing System** - We need some system that preserves the details discovered by the reading Job Post Reading Agent
- **Job Post Tagging Agent** - We need an agent that reads the created job post, reads stored tags from the tag system, creates new tags if needed, and applies tags to jobs.

**Info:** We are splitting the Reading Agent and the Tagging Agent to limit tool-choice, a common failure vector for agentic systems.

- **Job Board Null Handling** - We need the Job Board Reading Agent to be able to return `null` jobs IFF there are no current careers
- **Org Tag Forwarding** - We need a way to forward the tags about `organizations` to the Job Post Tagging Agent as some data will be contextual. For example, if a job says "hybrid in our office" and doesn't list where the office is, we can use the `organizations` Province tag to resolve the `job` Province tag.
